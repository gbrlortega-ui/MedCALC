<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>APGAR Familiar ‚Äì Plataforma de Estudos</title>

<style>
:root{
  --bg:#f5f5f7;
  --bg-section:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --focus:#4f46e5;
  --ok:#065f46;--ok-bg:#d1fae5;
  --warn:#92400e;--warn-bg:#ffedd5;
  --bad:#7f1d1d;--bad-bg:#fee2e2;
  --shadow-soft:0 18px 45px rgba(15,23,42,.12);
}

*{box-sizing:border-box;}

body{
  margin:0;
  background:radial-gradient(circle at top,#e5f0ff 0,#f5f5f7 45%,#f9fafb 100%);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  font-size:0.9rem;
}

/* LINKS */
a{
  color:inherit;
  text-decoration:none;
}

/* HEADER / NAVBAR */
header.site-header{
  position:sticky;
  top:0;
  z-index:10;
  backdrop-filter:blur(16px);
  background:linear-gradient(to bottom,rgba(245,245,247,.95),rgba(245,245,247,.86));
  border-bottom:1px solid rgba(209,213,219,.7);
}

.nav-inner{
  max-width:1100px;
  margin:0 auto;
  padding:12px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:24px;
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
}

.brand-mark{
  width:28px;
  height:28px;
  border-radius:999px;
  border:1px solid #111827;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:.85rem;
  font-weight:600;
}

.brand-text{
  display:flex;
  flex-direction:column;
  line-height:1.2;
}

.brand-title{
  font-size:.95rem;
  font-weight:600;
}

.brand-subtitle{
  font-size:.7rem;
  text-transform:uppercase;
  letter-spacing:.16em;
  color:var(--muted);
}

.nav-links{
  display:flex;
  align-items:center;
  gap:16px;
  font-size:.82rem;
  color:var(--muted);
  flex-wrap:wrap;
}

.nav-back{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:5px 10px;
  border-radius:999px;
  border:1px solid #d1d5db;
  font-size:.78rem;
  background:#ffffff;
  cursor:pointer;
  transition:background .15s,transform .12s,color .15s;
}

.nav-back span:first-child{
  font-size:.9rem;
  transform:translateY(1px);
}

.nav-back:hover{
  background:#111827;
  color:#f9fafb;
  transform:translateY(-1px);
}

.nav-pill{
  padding:5px 10px;
  border-radius:999px;
  border:1px solid #d1d5db;
  font-size:.72rem;
  text-transform:uppercase;
  letter-spacing:.14em;
  background:#ffffff;
}

/* PAGE WRAPPER */
.page{
  max-width:900px;
  margin:0 auto;
  padding:28px 20px 60px;
}

/* HERO / T√çTULO */
.hero-apgar{
  margin-bottom:18px;
}

.hero-badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:4px 11px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.5);
  font-size:.75rem;
  letter-spacing:.16em;
  text-transform:uppercase;
  color:var(--muted);
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(18px);
}

.hero-badge-dot{
  width:6px;
  height:6px;
  border-radius:999px;
  background:#22c55e;
  box-shadow:0 0 0 4px rgba(34,197,94,.2);
}

.hero-title{
  margin:14px 0 4px;
  font-size:clamp(1.7rem,2.3vw,2rem);
  line-height:1.1;
  letter-spacing:.02em;
}

.hero-title span{
  display:block;
  font-weight:300;
  color:var(--muted);
}

.hero-text{
  margin:0;
  margin-top:6px;
  font-size:.92rem;
  color:var(--muted);
  max-width:640px;
}

/* CARD PRINCIPAL (√ÅREA IMPRESSA) */
.card-wrapper{
  background:var(--bg-section);
  border-radius:20px;
  border:1px solid rgba(209,213,219,.9);
  box-shadow:var(--shadow-soft);
  padding:18px 18px 16px;
}

/* Mant√©m a estrutura original do printArea */
#printArea h1{
  margin:0 0 4px;
  font-size:1.4rem;
}

#printArea .sub{
  color:var(--muted);
  margin:0 0 12px;
  font-size:.85rem;
}

.card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
}

table{
  width:100%;
  border-collapse:collapse;
  margin-bottom:6px;
  font-size:.8rem;
}

th,td{
  border-bottom:1px solid var(--border);
  padding:6px;
  text-align:center;
}

th{
  background:#0f172a;
  color:#fff;
  font-weight:600;
  font-size:.78rem;
}

td:first-child{text-align:left;}

input[type=radio]{transform:scale(1.1);cursor:pointer;}

#obs{
  width:100%;
  padding:6px 8px;
  border:1px solid var(--border);
  border-radius:6px;
  font-size:.85rem;
}

/* RESULTADO */
.result-panel{
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
  background:#fff;
  margin-top:10px;
  font-size:.9rem;
}

.value{
  font-size:1.4rem;
  font-weight:800;
}

.pill{
  display:inline-block;
  padding:4px 8px;
  border-radius:999px;
  font-size:.8rem;
  font-weight:700;
}

.pill-ok{background:var(--ok-bg);color:var(--ok);}
.pill-warn{background:var(--warn-bg);color:var(--warn);}
.pill-bad{background:var(--bad-bg);color:var(--bad);}

.small{
  font-size:.75rem;
  color:var(--muted);
  margin-top:6px;
}

/* BOT√ïES INFERIORES */
.btns{
  display:flex;
  gap:8px;
  margin-top:14px;
  flex-wrap:wrap;
}

button{
  border:none;
  padding:7px 12px;
  border-radius:999px;
  cursor:pointer;
  font-size:.8rem;
  font-weight:600;
  display:inline-flex;
  align-items:center;
  gap:6px;
  transition:background .2s,transform .08s,box-shadow .2s;
}

.btn-ghost{
  background:#ffffff;
  border:1px solid #d1d5db;
  color:#111827;
}

.btn-ghost:hover{
  background:#0f172a;
  color:#f9fafb;
  transform:translateY(-1px);
}

.btn-primary{
  background:var(--focus);
  color:#fff;
  box-shadow:0 14px 28px rgba(79,70,229,.45);
}

.btn-primary:hover{
  background:#3730a3;
  transform:translateY(-1px);
  box-shadow:0 18px 36px rgba(55,48,163,.55);
}

/* FOOTER */
footer.site-footer{
  border-top:1px solid rgba(209,213,219,.7);
  margin-top:32px;
  padding:14px 20px 20px;
  font-size:.8rem;
  color:var(--muted);
  display:flex;
  justify-content:space-between;
  gap:8px;
  flex-wrap:wrap;
  max-width:900px;
  margin-left:auto;
  margin-right:auto;
}

footer.site-footer strong{
  font-weight:500;
  color:#111827;
}

/* RESPONSIVO */
@media (max-width:640px){
  .nav-inner{
    flex-direction:column;
    align-items:flex-start;
  }
  .page{
    padding:22px 16px 40px;
  }
}

/* IMPRESS√ÉO: apenas √°rea do formul√°rio, formato A5, sem header/footer/bot√µes */
@media print{
  header.site-header,
  footer.site-footer,
  .hero-apgar{
    display:none !important;
  }

  body{
    background:#fff;
    font-size:.8rem;
  }

  .page{
    padding:0;
    margin:0;
    max-width:none;
  }

  .card-wrapper{
    border:none;
    box-shadow:none;
    padding:0;
  }

  .btns{
    display:none !important;
  }

  @page{
    size:A5 portrait;
    margin:0.5cm;
  }
}
</style>
</head>
<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="nav-inner">
      <div class="brand">
        <div class="brand-mark">M</div>
        <div class="brand-text">
          <div class="brand-title">Medicina Integrada</div>
          <div class="brand-subtitle">USF ‚Ä¢ APGAR Familiar</div>
        </div>
      </div>
      <nav class="nav-links">
        <a href="index.html" class="nav-back">
          <span>‚¨Ö</span>
          <span>Voltar √† USF</span>
        </a>
        <span class="nav-pill">APGAR Familiar</span>
      </nav>
    </div>
  </header>

  <main class="page">
    <!-- HERO -->
    <section class="hero-apgar">
      <div class="hero-badge">
        <span class="hero-badge-dot"></span>
        AVALIA√á√ÉO FAMILIAR ‚Ä¢ APGAR
      </div>
      <h1 class="hero-title">
        APGAR Familiar
        <span>Ferramenta did√°tica para leitura r√°pida da funcionalidade familiar.</span>
      </h1>
      <p class="hero-text">
        Uso acad√™mico e de pr√°tica supervisionada: preencha as quest√µes com base na entrevista
        e utilize o resultado como ponto de partida para discuss√£o em equipe e integra√ß√£o com
        outros instrumentos (Ciclo de Vida, Conceito Familiar, PRACTICE, Coelho Savassi etc.).
      </p>
    </section>

    <!-- CARD PRINCIPAL (inclui √°rea de impress√£o) -->
    <section class="card-wrapper">
      <!-- √ÅREA QUE VAI PARA IMPRESS√ÉO / PDF -->
      <div id="printArea">
        <h1>APGAR Familiar</h1>
        <p class="sub">Avalia√ß√£o da funcionalidade familiar segundo Smilkstein.</p>

        <section class="card">
          <table>
            <thead>
              <tr>
                <th>Quest√£o</th>
                <th>Sempre<br>(2)</th>
                <th>Quase sempre<br>(1.5)</th>
                <th>Algumas vezes<br>(1)</th>
                <th>Raramente<br>(0.5)</th>
                <th>Nunca<br>(0)</th>
              </tr>
            </thead>
            <tbody id="tbody"></tbody>
          </table>

          <div>
            <label><b>Observa√ß√µes:</b></label>
            <input id="obs" placeholder="Descreva aspectos relevantes sobre a din√¢mica familiar...">
          </div>
        </section>

        <div id="painel" class="result-panel">
          Responda todas as perguntas para visualizar a pontua√ß√£o total.
        </div>

        <p class="small">
          <b>Interpreta√ß√£o:</b> 7‚Äì10 ‚Üí Boa funcionalidade ¬∑ 4‚Äì6 ‚Üí Disfun√ß√£o moderada ¬∑ 0‚Äì3 ‚Üí Disfun√ß√£o grave.<br>
          Smilkstein, 1978. Vers√£o adaptada para APS.
        </p>
      </div>
      <!-- FIM √ÅREA DE IMPRESS√ÉO -->

      <!-- BOT√ïES -->
      <div class="btns">
        <button id="btnVoltar" class="btn-ghost">‚¨ÖÔ∏è Voltar</button>
        <button id="btnPrint" class="btn-ghost">üñ®Ô∏è Imprimir / PDF</button>
        <button id="btnPDF" class="btn-ghost">üíæ Baixar PDF</button>
        <button id="btnProximo" class="btn-primary">‚û°Ô∏è Pr√≥ximo: Ciclo Vital</button>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <span>Desenvolvido por <strong>Gabriel Ortega Antonio</strong></span>
    <span>M√≥dulo USF ‚Ä¢ APGAR Familiar</span>
  </footer>

  <!-- SCRIPTS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
  (function(){
    const perguntas=[
      "Posso recorrer √† minha fam√≠lia em busca de ajuda quando algo me preocupa.",
      "Minha fam√≠lia e eu conversamos e compartilhamos os problemas.",
      "Minha fam√≠lia aceita e apoia meus novos projetos e decis√µes.",
      "Minha fam√≠lia demonstra afei√ß√£o e reage bem √†s minhas emo√ß√µes.",
      "Compartilhamos o tempo juntos de forma satisfat√≥ria."
    ];
    const tbody=document.getElementById('tbody');
    const painel=document.getElementById('painel');

    perguntas.forEach((p,i)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td>${p}</td>
        <td><input type="radio" name="q${i}" value="2"></td>
        <td><input type="radio" name="q${i}" value="1.5"></td>
        <td><input type="radio" name="q${i}" value="1"></td>
        <td><input type="radio" name="q${i}" value="0.5"></td>
        <td><input type="radio" name="q${i}" value="0"></td>
      `;
      tbody.appendChild(tr);
    });

    function calc(){
      let total=0,resp=0;
      perguntas.forEach((_,i)=>{
        const r=document.querySelector(`input[name="q${i}"]:checked`);
        if(r){total+=Number(r.value);resp++;}
      });
      if(resp<perguntas.length){
        painel.textContent=`Responda todas as ${perguntas.length} quest√µes (${resp}/${perguntas.length}).`;
        return;
      }

      localStorage.setItem('apgarTotal', total);
      localStorage.setItem('apgarObs', document.getElementById('obs').value || '');

      let cat={txt:"Boa funcionalidade",pill:"pill-ok"};
      if(total<=6&&total>=4)cat={txt:"Disfun√ß√£o moderada",pill:"pill-warn"};
      else if(total<4)cat={txt:"Disfun√ß√£o grave",pill:"pill-bad"};

      painel.innerHTML=`
        <div class="value">${total.toFixed(1)} pts</div>
        <span class="pill ${cat.pill}">${cat.txt}</span>
        <div class="small">Obs: ${document.getElementById('obs').value||'‚Äî'}</div>
      `;
    }

    document.addEventListener('change',e=>{
      if(e.target.type==='radio'||e.target.id==='obs')calc();
    });

    // Voltar
    document.getElementById('btnVoltar').addEventListener('click',()=>{
      window.history.back();
    });

    // Imprimir
    document.getElementById('btnPrint').addEventListener('click',()=>window.print());

    // PDF
    document.getElementById('btnPDF').addEventListener('click',()=>{
      const element=document.getElementById('printArea');
      const opt={
        margin:0.3,
        filename:'APGAR_Familiar.pdf',
        image:{type:'jpeg',quality:0.98},
        html2canvas:{scale:2},
        jsPDF:{unit:'in',format:'a5',orientation:'portrait'}
      };
      html2pdf().set(opt).from(element).save();
    });

    // Pr√≥ximo ‚Üí Ciclo Familiar
    document.getElementById('btnProximo').addEventListener('click',()=>{
      const total = localStorage.getItem('apgarTotal');
      if(!total){
        alert('Preencha o APGAR antes de continuar.');
        return;
      }
      window.location.href = "ciclofamiliar.html";
    });
  })();
  </script>
</body>
</html>
